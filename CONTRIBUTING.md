How to contribute to **SMART CHILD DEVELOPMENT ANALYZER**
=================================================

Thank you for your interest in contributing to the **Smart Child Development Analyzer** - a UNICEF partnership to improve early childhood development!

This page explains forms of contribution, how to set up the project locally, how to submit a pull-request, create issues and much more.

## Types of contribution

<!--
Describe which forms of contribution are welcome (code, bug reporting, documentation, blog posts...).
-->

### Code

If you would like to help with a code contribution, either a new feature or a contribution on an open issue, it would be great if you are familiar with the technologies used. Our project mainly uses Python and the Django framework, but other open-source tools used are also listed in the [home page](README.md#built-with).

When you feel ready, fork this repository, [**create a new branch**](https://support.atlassian.com/bitbucket-cloud/docs/branch-a-repository/), follow the instructions below to create a [local development environment](CONTRIBUTING.md#how-to-create-a-development-environment) and submit your contributions via [pull requests](CONTRIBUTING.md#how-to-submit-a-pull-request)!

It is critical that your code contribution is covered by testing using the `pytest` framework. We recommend following a [Test-driven development](https://en.wikipedia.org/wiki/Test-driven_development) approach. The minimum code coverage of 80% is implemented by an automated Bitbucket Pipelines evaluation,
which checks the code with every pull-request.

Keep an eye on the development best practices and codestyle used in the project, this will ensure that your contribution is reviewed and accepted faster.


### Bug reporting

Do you want to report a new bug you found or search for existing problems? Check the [Jira issues](https://bitbucket.org/ptmtech/central-database/jira) page!

If you are reporting a new issue, please be as detailed as you can. Include screenshots, error codes and preferably a [minimal reproducible example](https://en.wikipedia.org/wiki/Minimal_reproducible_example).

### Documentation

If you believe that some part of the project is not documented or that the documentation could be improved, you can help us with that!

Python code documentation can be generated by [Sphinx](https://www.sphinx-doc.org/) from docstrings in Numpy or Google format. In addition, documentation pages can be manually added in `rst` format to supplement other aspects of the project documentation inside the [docs folder](central_database/docs).

## How to create a development environment

### Pre-requisites

- [Visual Studio Code](https://code.visualstudio.com/) editor
- [Docker](https://www.docker.com/get-started/) for your operating system
- [Git](https://git-scm.com/downloads)

### Clone repository

`git clone git@bitbucket.org:ptmtech/central-database.git`

### Remote Container

The project is intended to be developed inside a containerized development environment using Visual Studio Code [Remote - Containers extension](https://code.visualstudio.com/docs/remote/containers). More information on how to develop using containers is available [here](https://www.youtube.com/watch?v=KFyRLxiRKAc).

To use the development IDE, open the project folder with VS Code and press 'F1', then search for: 'Remote-Containers: Rebuild and Reopen in Container'.
VS Code should reopen your IDE inside the dev container, which should make you ready to start developing!

Tests should be available in the Testing tab (troubleshooting below). Debug tab also contains a flake8 and a runserver action.

Rebuild and Reopen in Container should create:

- A Django microservice on [localhost:8000](http://localhost:8000/)

- A HL7 FHIR API on [localhost:8080](http://localhost:8080/)

- Documentation on [localhost:9000](http://localhost:9000/)

### Managing dependencies

This project uses [Poetry](https://python-poetry.org/) for dependency management.
Poetry offers a lockfile to ensure repeatable installs.

To `add` a dependency, use:

```bash
poetry add <package>
```

Use the `--dev` option to add a package as a development dependency only.

The `add` command adds required packages to the pyproject.toml, updates poetry.lock and installs them.

Please consult [Poetry documentation](https://python-poetry.org/docs/) for more information.

### Troubleshooting

#### Tests are not showing in the Test Explorer UI.

The following message appears in VS Code:

>Cannot activate the 'Python Test Explorer for Visual Studio Code' extension because it depends on the 'Python' extension, which is not installed. Would you like to install the extension and reload the window?

Hit the Install and Reload button below the message. The IDE will reopen and tests should now appear in the Test Explorer.

## How to submit a pull request

Pull requests are the way to submit your collaboration to the project. If you are new to collaborations, Bitbucket's [pull requests guide](https://www.atlassian.com/git/tutorials/making-a-pull-request) can help you.

Your pull request should carefully describe the modifications you have made. Describe the purpose of the feature and the rationale used to propose the solution as presented. Whenever possible, include screenshots of visual modifications and a step-by-step description to test and observe what has been modified.

## Code style and good-practices

### Codestyle

We follow PEP8, the standard style guide for Python code. Coding style is evaluated using [pre-commit](https://pre-commit.com/) hooks.
Every commit automatically triggers the hooks, which flag problems with
the code like debug statements, trailing whitespace, and missing semicolons, coding style,
and cyclomatic complexity. When you are developing, keep an eye on the alerts in the "Problems" tab of VS Code and check periodically for various style issues with the `flake8` command.

### Automated tests

We use [pytest](https://docs.pytest.org/) as the framework for building and executing automated tests.
The minimum code coverage of 80% is implemented by an automated Bitbucket Pipelines evaluation,
which checks the code with every pull-request.

### Documentation

Please document your contribution in different aspects. Write docstrings for your code and create pages dedicated to other types of contributions such as references and usage guides.

Python code documentation can be generated by [Sphinx](https://www.sphinx-doc.org/) from docstrings in Numpy or
Google format. Pages can be manually added in `rst` format to supplement other aspects of the
project documentation.

## Code review process

Your code will be reviewed by the code maintainers. Currently, approval by 2 reviewers, including a default reviewer, is required. In addition, automated tests will be checked to see if they pass and are above the established coverage threshold. The necessary discussions will be held directly in the open pull request. We will try to make the process as fast as possible, we know how important this is for the community!
